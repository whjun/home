{include file="./admin-layout/header.html" /}
<style>
    .layui-form-label{
        width: auto;
    }
    a{text-decoration:none}
</style>
<div class="admin-main">
    <div class="layui-form">
        <blockquote class="layui-elem-quote" style="font-size: 12px;">
            <div class="layui-form-item" style="margin-bottom: 0px;margin-left: 80px;">
                <form method="get" action="">
                    <div>
                        <div class="layui-input-inline" style="width:auto;margin-right: 90px;">
                            <label class="layui-form-label">设备编号：</label>
                            <input type="text" class="layui-input" style="width:200px" name="filter" id="name" value="" placeholder="请输入设备编号搜索" autocomplete="off">
                        </div>
                        <div class="layui-input-inline" style="width:auto;margin-right: 90px;">
                            <label class="layui-form-label">设备名称：</label>
                            <input type="text" class="layui-input" style="width:200px" name="filter" id="name" value="" placeholder="请输入设备名称搜索" autocomplete="off">
                        </div>
                        <div class="layui-input-inline" style="width:auto;margin-right: 90px;">
                            <label class="layui-form-label">负责人：</label>
                            <input type="text" class="layui-input" style="width:200px" name="filter" id="name" value="" placeholder="请输入支付宝ID搜索" autocomplete="off">
                        </div>
                        
                    </div>
                    <div style="float: left">
                        <div class="layui-input-inline" style="width:auto;margin-right: 90px;">
                            <label class="layui-form-label">所属医院：</label>
                            <div class="layui-input-block" style="width: 160px;margin-left: 90px;">
                                <select name="city" lay-verify="">
                                    <option value="">请选择所属医院</option>
                                    {foreach name="hospital" item="val"}
                                    <option value="{$val.id}">{$val.hospital_name}</option>
                                    {/foreach}
                                </select>
                            </div>
                        </div>
                        <div class="layui-input-inline">
                            <button class="layui-btn" style="margin-left: 90px"><i class="layui-icon">&#xe615;</i> 查询</button>
                        </div>
                        <div class="layui-input-inline">
                            <button type="button" class="layui-btn layui-btn-normal" onclick="addfault()"><i class="layui-icon">&#xe608;</i> 添加</button>
                        </div>
                    </div>
                </form>
                <!-- {foreach name="menulist" item="val"} {if condition="$val.url eq 'Equipment/addfault'"} -->
                <!-- <div class="layui-input-inline" style="width: auto;">
                    <button class="layui-btn layui-btn-normal" onclick="addfault()"><i class="layui-icon">&#xe608;</i>添加</button>
                </div> -->
                <!-- {/if}{/foreach} -->
            </div>
        </blockquote>
        <table class="layui-table">
            <thead>
                <tr>
                <th>所属医院</th>
                <th>设备编号</th>
                <th>设备地区</th>
                <th>柜门名称</th>
                <th>故障类型</th>
                <th>故障描述</th>
                <th>联系人</th>
                <th>联系人电话</th>
                <th>设备负责人</th>
                <th>负责人联系电话</th>
                <th>操作</th>
                </tr> 
            </thead>
            <tbody>
                <tr style="height: 70px">
                    <td colspan="11">
                        <span>保修单号：1009201804041298</span>
                        <span style="margin-left: 97px;color: gray;">2019-04-04 12：12：12</span>
                        <span style="float: right;margin-right: 10px;">报修处理中</span>
                    </td>
                </tr>
                <tr style="height: 70px">
                    <td>沂水人民医院</td>
                    <td>1009201804041298</td>
                    <td>山东省临沂市沂水县</td>
                    <td>沂水人民医院一楼1号柜门</td>
                    <td>无法开门</td>
                    <td>归还时柜门没有打开，无法关闭</td>
                    <td>小红</td>
                    <td>1566666666</td>
                    <td>周二</td>
                    <td>15666666666</td>
                    <td>处理完成</td>
                </tr>
            </tbody>
        </table>
        <div id="fault" style="display: none">
            <label class="layui-form-label">设备地区</label>
            <div class="layui-input-inline">
                <input type="text" class="layui-input" style="width:200px" name="filter" id="city" value="" placeholder="请选择省市区" autocomplete="off">
            </div>
        </div>
        <div style="display: none;" id="c">
            <div class="layui-input-inline" id="div">
                <select name="data1" lay-filter="data1">
                    {foreach name="region" item="vo"}
                        <option value="{$vo.id}" >{$vo.name}</option>
                    {/foreach}
                </select>
            </div>
            <div class="layui-input-inline" id="div1" style="display: none;">
                <select lay-filter="data2" name="data2" id="select2">
                </select>
            </div>
            <div class="layui-input-inline" id="div2" style="display: none;">
                <select lay-filter="data3" name="select3" id="select3">
                </select>
            </div>
        </div>
    </div>
</div>
<script>
    //Demo
    layui.use('form', function(){
        var form = layui.form;
        
        //监听提交
        form.on('submit(formDemo)', function(data){
        layer.msg(JSON.stringify(data.field));
        return false;
        });
    });
    //添加
    function addfault(){
        layer.open({
        type: 1
        ,title: '新增/编辑'
        ,area: ['450px', '500px']
        ,shade: 0
        ,content: $('#fault')
        ,btn: ['确定', '取消']
        ,shade :0.8
        ,btnAlign: 'c'
        ,skin: 'open_class'
        ,yes: function(layero, index){
            $.ajax({
                url: "{:url('addhospital')}",
                data: field,
                type: "POST"
            }).done(function(data) {
                
                if(data.result == 0){
                    layer.msg(data.message, {
                        icon: 1,
                        time: 3000
                    },function(){
                        location.href = data.url;
                    });
                }else{
                    layer.msg(data.message, {
                        icon: 2,
                        time: 3000
                    });
                }
            }).error(function(data) {
                layer.msg('错误', {
                    icon: 2,
                    content: '服务器错误'
                })
            })
        }
        });
    }
    </script>